# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# External AI Providers Registry
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# This file registers external AI providers that can be used
# as FALLBACK when local LLM lacks specific knowledge.
#
# IMPORTANT: External AI should ONLY be used when:
# 1. Orchestrator explicitly detects lack of local knowledge
# 2. RAG memory returns insufficient context
# 3. Agent justifies technical necessity
# 4. Call is logged, audited, and approved
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

providers:
  - name: claude
    type: llm
    provider: anthropic
    enabled: false
    models:
      - claude-3-5-sonnet-20241022
      - claude-3-opus-20240229
    endpoint: https://api.anthropic.com/v1/messages
    env_key: ANTHROPIC_API_KEY
    cost_per_1k_input_tokens: 0.003
    cost_per_1k_output_tokens: 0.015
    max_tokens_per_day: 100000
    allowed_scopes:
      - research_breaking_changes
      - compare_library_versions
      - validate_recent_behavior
      - research_new_apis
    forbidden_scopes:
      - generate_main_code
      - replace_local_llm

  - name: openai
    type: llm
    provider: openai
    enabled: false
    models:
      - gpt-4-turbo-preview
      - gpt-4
    endpoint: https://api.openai.com/v1/chat/completions
    env_key: OPENAI_API_KEY
    cost_per_1k_input_tokens: 0.01
    cost_per_1k_output_tokens: 0.03
    max_tokens_per_day: 100000
    allowed_scopes:
      - research_breaking_changes
      - compare_library_versions
      - validate_recent_behavior
    forbidden_scopes:
      - generate_main_code
      - replace_local_llm

  - name: gemini
    type: llm
    provider: google
    enabled: false
    models:
      - gemini-pro
      - gemini-pro-vision
    endpoint: https://generativelanguage.googleapis.com/v1/models/
    env_key: GOOGLE_API_KEY
    cost_per_1k_input_tokens: 0.0
    cost_per_1k_output_tokens: 0.0
    max_tokens_per_day: 100000
    allowed_scopes:
      - research_breaking_changes
      - compare_library_versions
    forbidden_scopes:
      - generate_main_code

  - name: openrouter
    type: llm
    provider: openrouter
    enabled: false
    models:
      - anthropic/claude-3-opus
      - openai/gpt-4-turbo
    endpoint: https://openrouter.ai/api/v1/chat/completions
    env_key: OPENROUTER_API_KEY
    cost_per_1k_input_tokens: 0.01
    cost_per_1k_output_tokens: 0.03
    max_tokens_per_day: 50000
    allowed_scopes:
      - research_breaking_changes
    forbidden_scopes:
      - generate_main_code
      - replace_local_llm

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Usage Policies
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

policies:
  require_approval: true
  cache_responses: true
  log_all_calls: true
  max_cost_per_mission_usd: 5.00
  max_cost_per_day_usd: 20.00

  # Automatic approval conditions (no manual approval needed)
  auto_approve_conditions:
    - scope: research_breaking_changes
      max_cost_usd: 0.10
    - scope: compare_library_versions
      max_cost_usd: 0.10

  # Always require manual approval
  manual_approval_required:
    - scope: validate_recent_behavior
    - cost_exceeds_usd: 0.50
